var apply = require('./_apply'),
    createCtorWrapper = require('./_createCtorWrapper'),
    createHybridWrapper = require('./_createHybridWrapper'),
    createRecurryWrapper = require('./_createRecurryWrapper'),
<<<<<<< HEAD
<<<<<<< HEAD
    replaceHolders = require('./_replaceHolders'),
    root = require('./_root');
=======
    replaceHolders = require('./_replaceHolders');
>>>>>>> f2afcb5... initial commit
=======
    replaceHolders = require('./_replaceHolders'),
    root = require('./_root');
>>>>>>> 8461533... removing things?

/**
 * Creates a function that wraps `func` to enable currying.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {number} bitmask The bitmask of wrapper flags. See `createWrapper` for more details.
 * @param {number} arity The arity of `func`.
 * @returns {Function} Returns the new wrapped function.
 */
function createCurryWrapper(func, bitmask, arity) {
  var Ctor = createCtorWrapper(func);

  function wrapper() {
    var length = arguments.length,
        index = length,
        args = Array(length),
<<<<<<< HEAD
<<<<<<< HEAD
        fn = (this && this !== root && this instanceof wrapper) ? Ctor : func,
=======
        fn = (this && this !== global && this instanceof wrapper) ? Ctor : func,
>>>>>>> f2afcb5... initial commit
=======
        fn = (this && this !== root && this instanceof wrapper) ? Ctor : func,
>>>>>>> 8461533... removing things?
        placeholder = wrapper.placeholder;

    while (index--) {
      args[index] = arguments[index];
    }
    var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)
      ? []
      : replaceHolders(args, placeholder);

    length -= holders.length;
    return length < arity
      ? createRecurryWrapper(func, bitmask, createHybridWrapper, placeholder, undefined, args, holders, undefined, undefined, arity - length)
      : apply(fn, this, args);
  }
  return wrapper;
}

module.exports = createCurryWrapper;
